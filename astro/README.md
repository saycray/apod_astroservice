## О сервисе

Сервис позволяет созранять картинки на диске из https://api.nasa.gov/ на диске. 
Для более удобного поиска по диапозону используется бд postgres.

### Для первого запуска приложения:
Для настройки бд необхлдима утилита: https://github.com/golang-migrate/migrate

## Первый запуск
```
make first_start
```

## Повторный запуск/остановка/перезапуск
```
make start
make stop
make restart
```

## Из тестов есть только юнит тесты
```
make test
```

## Пример использования

1) Скачивание.
    ```
    curl http://127.0.0.1:8000/v1/picday
    ```
    Успешный ответ должен выглядеть примерно так
    ```
    {"message":"already stored","urls":["https://apod.nasa.gov/apod/image/2212/FullCircleRainbow_Moesch_960.jpg"]}
    ```

2) Получение доступных урлов.
    Запросы на получение доступных урлов должны выглядеть так
    ```
    curl http://127.0.0.1:8000/v1/stored?date=2022-12-27
    ```

    или

    ```
    curl http://127.0.0.1:8000/v1/stored?start_date=2021-12-25&end_date=2022-12-28
    ```

     Успешный ответ должен выглядеть примерно так
    ```
    {"message":"ok","urls":["http://127.0.0.1:8000/v1/storage?name=2022-12-27.jpg"]}
    ```

3) Получение картинки с сервера.
    ```
    curl http://127.0.0.1:8000/v1/storage?name=2022-12-27.jpg
    ```
    В успешном случае будет возвращена картинка

Немного дополнительной инфы:


В схеме данных есть зависимости неключевых столбцов связанных с url/hd_url и media_type. Смысла доводить до 3нф не вижу так как нормализация нужна для избавления от аномалий в данных, которые невозможны из-за ограничений индекса по дате

В docker compose монтируются тома .database и .pictures чтобы можно было сохранять информацию при остановке сервиса и просматривать сохранённые картинки.
